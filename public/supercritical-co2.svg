<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1100 550">
  <rect width="1100" height="550" fill="#ffffff"/>

  <defs>
    <filter id="dropshadow">
      <feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
      <feOffset dx="0" dy="2" result="offsetblur"/>
      <feComponentTransfer>
        <feFuncA type="linear" slope="0.12"/>
      </feComponentTransfer>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <linearGradient id="vesselFill" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f1f5f9"/>
      <stop offset="100%" style="stop-color:#e2e8f0"/>
    </linearGradient>

    <marker id="redArrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M 0 0 L 10 3 L 0 6 z" fill="#DC2626"/>
    </marker>

    <marker id="blueArrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M 0 0 L 10 3 L 0 6 z" fill="#0369a1"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="550" y="35" font-family="system-ui, sans-serif" font-size="24" fill="#0f172a" text-anchor="middle" font-weight="700">Supercritical CO₂ Extraction</text>
  <text x="550" y="62" font-family="system-ui, sans-serif" font-size="15" fill="#64748b" text-anchor="middle">Continuous recycling loop extracts caffeine from beans</text>

  <!-- Extraction Vessel (top center) -->
  <g>
    <rect x="420" y="110" width="260" height="140" rx="14" fill="url(#vesselFill)" stroke="#1e293b" stroke-width="2.5" filter="url(#dropshadow)"/>

    <rect x="480" y="95" width="180" height="36" rx="18" fill="#0f172a"/>
    <text x="570" y="119" font-family="system-ui, sans-serif" font-size="16" fill="#ffffff" text-anchor="middle" font-weight="600">Extraction Vessel</text>

    <!-- Coffee beans -->
    <ellipse cx="480" cy="165" rx="16" ry="20" fill="#8B7355"/>
    <path d="M 480 145 Q 485 165 480 185" stroke="#6B5335" stroke-width="2.5" fill="none"/>

    <ellipse cx="530" cy="175" rx="16" ry="20" fill="#9B8365"/>
    <path d="M 530 155 Q 535 175 530 195" stroke="#6B5335" stroke-width="2.5" fill="none"/>

    <ellipse cx="570" cy="165" rx="16" ry="20" fill="#8B7355"/>
    <path d="M 570 145 Q 575 165 570 185" stroke="#6B5335" stroke-width="2.5" fill="none"/>

    <ellipse cx="610" cy="175" rx="16" ry="20" fill="#9B8365"/>
    <path d="M 610 155 Q 615 175 610 195" stroke="#6B5335" stroke-width="2.5" fill="none"/>

    <ellipse cx="660" cy="165" rx="16" ry="20" fill="#8B7355"/>
    <path d="M 660 145 Q 665 165 660 185" stroke="#6B5335" stroke-width="2.5" fill="none"/>

    <!-- CO2 molecules -->
    <circle cx="450" cy="130" r="4" fill="#60A5FA"/>
    <circle cx="500" cy="135" r="4" fill="#60A5FA"/>
    <circle cx="550" cy="130" r="4" fill="#60A5FA"/>
    <circle cx="600" cy="135" r="4" fill="#60A5FA"/>
    <circle cx="650" cy="130" r="4" fill="#60A5FA"/>

    <circle cx="460" cy="215" r="4" fill="#60A5FA"/>
    <circle cx="520" cy="220" r="4" fill="#60A5FA"/>
    <circle cx="590" cy="215" r="4" fill="#60A5FA"/>
    <circle cx="640" cy="220" r="4" fill="#60A5FA"/>

    <rect x="450" y="225" width="200" height="20" rx="10" fill="#dbeafe" stroke="#0369a1" stroke-width="1.5"/>
    <text x="550" y="239" font-family="system-ui, sans-serif" font-size="11" fill="#0369a1" text-anchor="middle" font-weight="600">73 atm • 31°C</text>
  </g>

  <!-- Arrow to separator -->
  <path d="M 620 260 L 750 350" stroke="#DC2626" stroke-width="4" fill="none" marker-end="url(#redArrow)"/>
  <rect x="660" y="290" width="120" height="26" rx="13" fill="#FEE2E2"/>
  <text x="720" y="308" font-family="system-ui, sans-serif" font-size="13" fill="#DC2626" text-anchor="middle" font-weight="600">CO₂ + Caffeine</text>

  <!-- Separator (bottom right) -->
  <g>
    <rect x="730" y="360" width="280" height="150" rx="14" fill="url(#vesselFill)" stroke="#1e293b" stroke-width="2.5" filter="url(#dropshadow)"/>

    <rect x="790" y="345" width="160" height="36" rx="18" fill="#0f172a"/>
    <text x="870" y="369" font-family="system-ui, sans-serif" font-size="16" fill="#ffffff" text-anchor="middle" font-weight="600">Separator</text>

    <line x1="750" y1="430" x2="990" y2="430" stroke="#64748b" stroke-width="2" stroke-dasharray="5,5"/>

    <!-- CO2 rising -->
    <circle cx="770" cy="400" r="4" fill="#60A5FA"/>
    <circle cx="820" cy="405" r="4" fill="#60A5FA"/>
    <circle cx="870" cy="400" r="4" fill="#60A5FA"/>
    <circle cx="920" cy="405" r="4" fill="#60A5FA"/>
    <circle cx="970" cy="400" r="4" fill="#60A5FA"/>

    <!-- Caffeine sinking -->
    <circle cx="760" cy="460" r="5" fill="#DC2626"/>
    <circle cx="810" cy="470" r="5" fill="#DC2626"/>
    <circle cx="870" cy="465" r="5" fill="#DC2626"/>
    <circle cx="930" cy="475" r="5" fill="#DC2626"/>
    <circle cx="980" cy="468" r="5" fill="#DC2626"/>
  </g>

  <!-- Caffeine out arrow -->
  <path d="M 870 515 L 870 540" stroke="#DC2626" stroke-width="3" fill="none" marker-end="url(#redArrow)"/>
  <text x="910" y="530" font-family="system-ui, sans-serif" font-size="13" fill="#DC2626" text-anchor="start" font-weight="600">Caffeine removed</text>

  <!-- Recycle arrow -->
  <path d="M 730 400 L 200 400 L 200 180 L 420 180" stroke="#0369a1" stroke-width="4" fill="none" marker-end="url(#blueArrow)"/>
  <rect x="280" y="370" width="140" height="26" rx="13" fill="#dbeafe"/>
  <text x="350" y="388" font-family="system-ui, sans-serif" font-size="13" fill="#0369a1" text-anchor="middle" font-weight="600">Clean CO₂ Recycled</text>

  <!-- Info box -->
  <g>
    <rect x="50" y="110" width="300" height="210" rx="14" fill="#f8fafc" stroke="#cbd5e1" stroke-width="2" filter="url(#dropshadow)"/>

    <rect x="100" y="95" width="200" height="36" rx="18" fill="#0f172a"/>
    <text x="200" y="119" font-family="system-ui, sans-serif" font-size="16" fill="#ffffff" text-anchor="middle" font-weight="600">Key Advantages</text>

    <g transform="translate(70, 155)">
      <circle cx="8" cy="0" r="4" fill="#0369a1"/>
      <text x="22" y="5" font-family="system-ui, sans-serif" font-size="14" fill="#1e293b" font-weight="500">Acts as liquid &amp; gas</text>

      <circle cx="8" cy="35" r="4" fill="#0369a1"/>
      <text x="22" y="40" font-family="system-ui, sans-serif" font-size="14" fill="#1e293b" font-weight="500">Dissolves caffeine efficiently</text>

      <circle cx="8" cy="70" r="4" fill="#0369a1"/>
      <text x="22" y="75" font-family="system-ui, sans-serif" font-size="14" fill="#1e293b" font-weight="500">Penetrates beans easily</text>

      <circle cx="8" cy="105" r="4" fill="#0369a1"/>
      <text x="22" y="110" font-family="system-ui, sans-serif" font-size="14" fill="#1e293b" font-weight="500">Non-toxic &amp; recyclable</text>

      <circle cx="8" cy="140" r="4" fill="#0369a1"/>
      <text x="22" y="145" font-family="system-ui, sans-serif" font-size="14" fill="#1e293b" font-weight="500">Best flavor preservation</text>
    </g>
  </g>

  <!-- Legend -->
  <g transform="translate(420, 525)">
    <rect x="-10" y="-18" width="220" height="36" rx="10" fill="#f8fafc" stroke="#e2e8f0" stroke-width="2"/>

    <circle cx="5" cy="0" r="4" fill="#60A5FA"/>
    <text x="18" y="5" font-family="system-ui, sans-serif" font-size="12" fill="#0f172a" font-weight="500">CO₂ molecules</text>

    <circle cx="120" cy="0" r="5" fill="#DC2626"/>
    <text x="135" y="5" font-family="system-ui, sans-serif" font-size="12" fill="#0f172a" font-weight="500">Caffeine</text>
  </g>
</svg>
